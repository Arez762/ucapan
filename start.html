<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Ucapan</title>
</head>

<body>
    <!-- Background music -->
    <audio id="backgroundMusic" autoplay loop>
        <source src="asset/music.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <div>
        <section class="active">
            <div class="card">
                <div class="icon">
                    <img src="asset/birthday-cake.gif" alt="" width="100" height="100">
                </div>
                <p>ðŸŽ‰ Happy Birthday ðŸŽ‰</p>
                <p>Athaya</p>
            </div>
        </section>
        <section>
            <div class="card">
                <div class="icon">
                    <img src="asset/bubu-dudu-bubu.gif" alt="" width="100" height="100">
                </div>
                <p>Hi, Athaya</p>
                <p>Udah nambah tua aja nihh</p>
                <p>Semoga panjang umur dan Sehat selalu yaa! </p>
            </div>
        </section>
        <section>
            <div class="card">
                <div class="icon">
                    <img src="asset/bubu-dudu-bubu-in-costume.gif" alt="" width="100" height="100">
                </div>
                <p>Semoga dihari spesialmu ini,</p>
                <p> kamu dapat menjadi pribadi yang lebih baik lagi</p>
            </div>
        </section>
        <section>
            <div class="card">
                <div class="icon">
                    <img src="asset/love-bear.gif" alt="" width="100" height="100">
                </div>
                <p>Maafin aku yah,</p>
                <p>udah banyak buat salah kekamu, maaf cuma bisa ngasi ginian doang</p>
            </div>
        </section>
        <section>
            <div class="card">
                <div class="icon">
                    <img src="asset/tkthao219-bubududu (1).gif" alt="" width="100" height="100">
                </div>
                <p>Kasih feedback ke aku yahh, lewat chat</p>
            </div>
        </section>

        <button id="nextBtn">Lanjut</button>
    </div>

    <script src="confetti.js"></script>
    <!-- Confetti JS -->
    <script>
        const startConfettiLoop = () => confetti.start();
        const stopConfettiLoop = () => confetti.stop();
        startConfettiLoop();

        const backgroundMusic = document.getElementById('backgroundMusic');

        // Fallback if autoplay doesn't work
        backgroundMusic.addEventListener('play', function () {
            console.log("Audio started playing automatically.");
        });

        // Fallback for browsers blocking autoplay
        document.addEventListener('DOMContentLoaded', () => {
            // Try to play the audio if it is blocked
            const playPromise = backgroundMusic.play();

            if (playPromise !== undefined) {
                playPromise.catch(error => {
                    console.log("Autoplay failed: " + error);
                    // Start audio after user interaction if autoplay fails
                    document.addEventListener('click', () => {
                        backgroundMusic.play();
                    }, { once: true }); // Ensure this event runs only once
                });
            }
        });

        // Logic for next button and sections
        const sections = document.querySelectorAll('section');
        let currentSection = 0;
        const nextBtn = document.getElementById('nextBtn');

        nextBtn.addEventListener('click', () => {
            sections[currentSection].classList.remove('active');
            currentSection++;

            if (currentSection < sections.length) {
                sections[currentSection].classList.add('active');
            } else {
                stopConfettiLoop();
                nextBtn.disabled = true;
                nextBtn.textContent = 'Loading...';
                setTimeout(() => {
                    const whatsappNumber = "+6285822940742";
                    const message = encodeURIComponent("");
                    window.location.href = `https://wa.me/${whatsappNumber}?text=${message}`;
                }, 2000);
            }
        });
    </script>
</body>

</html>